<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Fil d'actualité</title>
        <!-- Favicon -->
        <link rel="icon" href="public/logoTemp.png" type="image/x-icon">
        <!-- SEO Meta Tags -->
        <meta name="description" content="Bienvenue sur notre forum dédié aux animés. Rejoignez-nous pour discuter et partager vos passions autour de vos animés préférés.">
        <meta name="keywords" content="forum, animés, manga, discussion, communauté, anime, otaku">
        <meta name="author" content="GERARD Lucas & Hmida Sami">
        <meta name="robots" content="index, follow">
        <!-- Open Graph Meta Tags (pour Facebook, LinkedIn, etc.) -->
        <meta property="og:title" content="Forum sur les animés">
        <meta property="og:description" content="Bienvenue sur notre forum dédié aux animés. Rejoignez-nous pour discuter et partager vos passions autour de vos animés préférés.">
        <meta property="og:image" content="URL_de_votre_image_de_prévisualisation">
        <!-- ICI IMAGE DE PREVUALISATION -->
        <meta property="og:url" content="URL_de_votre_forum">
        <!-- URL du site -->
        <meta property="og:type" content="website">
        <!-- Twitter Meta Tags -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="Forum sur les animés">
        <meta name="twitter:description" content="Bienvenue sur notre forum dédié aux animés. Rejoignez-nous pour discuter et partager vos passions autour de vos animés préférés.">
        <meta name="twitter:image" content="IMG_prévisualisation">
        <!-- ICI IMAGE DE PREVUALISATION -->
        <meta name="twitter:url" content="URL_de_votre_forum">
        <!-- URL du site -->
        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
        <!-- CSS Stylesheets -->
        <link rel="stylesheet" href="public/styleG.css">
        <link rel="stylesheet" href="public/styleUniquePost.css">
        <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX==" crossorigin="anonymous" />
        <!-- JavaScript -->
        <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
     </head>
<body>
    <header>
        <!-- Navbar -->
        <nav id="navbar">
           <div id="left-part">
              <a href="/"><img id="logo" src="public/logoTemp.png" alt="logo du site"></a>
              <a href="/">
                 <h1>BakaLand</h1>
              </a>
           </div>
           <div id="openBtn">
              <div class="burger-icon">
                 <span></span>
                 <span></span>
                 <span></span>
              </div>
           </div>
           <div id="mySidenav" class="sidenav">
              <a id="closeBtn" href="#" class="close">×</a>
              <ul>
                 <li><a href="/"><img src="public/home.png" alt="Fil d'actualité">Menu</a></li>
                 <li><a href="http://localhost:5500/posts"><img src="public/feed.png" alt="Nouveauté"> Fil d'actualité </a></li>
                 <li><a href="http://localhost:5500/login"><img src="public/account.png" alt="Mon compte"> Mon compte</a></li>
                 <li><a href="http://localhost:5500/about"><img src="public/info.png" alt="A propos"> A propos</a></li>
              </ul>
           </div>
        </nav>
        <!-- Image de fond Navbar -->
        <img id="img-navbar" src="public/nav_img.jpg" alt="Image de fond Navbar">
    </header>
     <!-- Section principale -->
     <main>
        <div class="post-container">
            <!-- Détails du post -->
            <div class="post-detail">
                <div class="dropdown">
                    <span class="ellipsis">...</span>
                    <div class="dropdown-content">
                        <a href="#" onclick="scrollToResponseForm()">Répondre</a>
                        <a href="#" onclick="openModal()">Signaler</a>
                    </div>
                </div>
                <h1 class="post-title">{{.Title}}</h1>
                <p class="post-theme">Thème: One Piece</p>
                <div class="post-image">
                    <img src="data:image/jpeg;base64,{{.Base64Image}}" alt="Post Image">
                </div>
                <p class="post-body">{{.Description}}</p>
                <div class="post-attachments">
                    <p>Pièces jointes: 3 (Image(s), Vidéo(s))</p>
                </div>
            </div>

            <!-- Réponses au post -->
            <div class="responses">
                <h2>Réponses</h2>
                <div class="response">
                    <div class="dropdown">
                        <span class="ellipsis">...</span>
                        <div class="dropdown-content">
                            <a href="#" onclick="scrollToResponseForm()">Répondre</a>
                            <a href="#" onclick="openModal()">Signaler</a>
                        </div>
                    </div>
                    <p><strong>Utilisateur1</strong> a répondu:</p>
                    <p>Voici la réponse de l'utilisateur 1. C'est un exemple de texte pour une réponse.</p>
                    <hr>
                </div>
                <div class="response">
                    <div class="dropdown">
                        <span class="ellipsis">...</span>
                        <div class="dropdown-content">
                            <a href="#" onclick="scrollToResponseForm()">Répondre</a>
                            <a href="#" onclick="openModal()">Signaler</a>
                        </div>
                    </div>
                    <p><strong>Utilisateur2</strong> a répondu:</p>
                    <p>Voici la réponse de l'utilisateur 2. C'est un autre exemple de texte pour une réponse.</p>
                    <hr>
                </div>
            </div>

            <!-- Formulaire de réponse -->
            <div class="response-form" id="response-form">
                <h2>Ajouter une réponse</h2>
                <form action="http://localhost:5500/add_response" method="post" enctype="multipart/form-data">
                    <div class="input-group">
                        <label for="response-message">Message:</label>
                        <div id="editor-container" style="height: 200px;"></div>
                        <input type="hidden" id="hidden-message" name="response-message">
                    </div>
                    <div class="input-group">
                        <label for="response-attachment">Pièce jointe:</label>
                        <input type="file" id="response-attachment" name="response-attachment">
                    </div>
                    <button type="submit">Répondre</button>
                </form>
            </div>
        </div>
    </main>

    <div id="reportModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Signaler ce contenu</h2>
            <form>
                <label for="report-reason">Raison:</label>
                <select id="report-reason" name="report-reason" onchange="toggleCommentSection()">
                    <option value="">Sélectionnez une raison</option>
                    <option value="spam">Spam</option>
                    <option value="harassment">Harcèlement</option>
                    <option value="inappropriate">Contenu inapproprié</option>
                    <option value="other">Autre</option>
                </select>
                <div id="comment-section">
                    <label for="report-comment">Commentaire:</label>
                    <textarea id="report-comment" name="report-comment" rows="4" cols="50"></textarea>
                </div>
                <button type="submit">Envoyer</button>
            </form>
        </div>
    </div>

     <!-- Footer -->
     <footer class="footer">
        <!-- Contenu du footer -->
        <div class="footer-section">
           <h3>Compte</h3>
           <ul>
              <li><a href="#">S'inscrire / Se connecter</a></li>
              <li><a href="#">Accéder à mon profil</a></li>
              <li><a href="#">Modifier le mot de passe</a></li>
           </ul>
        </div>
        <div class="footer-section">
           <h3>Administration</h3>
           <ul>
              <li><a href="#">Signaler un post, topic, compte</a></li>
              <li><a href="#">Demande de promotion</a></li>
           </ul>
        </div>
        <div class="footer-section">
           <h3>About</h3>
           <ul>
              <li><a href="#">A propos</a></li>
              <li><a href="#">Crédits</a></li>
           </ul>
        </div>
     </footer>
     <!-- Contact -->
     <div class="contact">
        <!-- Contenu de la section de contact -->
        <p class="contact-info">Nous contacter</p>
        <form action="#">
           <label for="email">Email*</label>
           <input type="email" id="email" name="email" minlength="7" maxlength="75" placeholder="example@mail.com" required>
           <label for="subject">Votre objet</label>
           <input type="text" id="subject" name="subject" maxlength="50" placeholder="Objet">
           <label for="message">Message*</label>
           <textarea id="message" name="message" minlength="2" maxlength="250" placeholder="Votre message" required></textarea>
           <p>*entrer obligatoire</p>
           <button type="submit">Envoyer</button>
        </form>
     </div>
     <!-- Scripts -->
     <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
     <script src="public/script.js"></script>
     <script>
        // Initialisation de Quill
        var quill = new Quill('#editor-container', {
            theme: 'snow',
            modules: {
                toolbar: [
                    [{ 'font': [] }, { 'size': [] }],
                    ['bold', 'italic', 'underline', 'strike'],
                    [{ 'color': [] }, { 'background': [] }],
                    [{ 'list': 'ordered'}, { 'list': 'bullet' }],
                    [{ 'indent': '-1'}, { 'indent': '+1' }],
                    [{ 'align': [] }],
                    ['clean']
                ]
            }
        });

        // Envoi du contenu Quill dans un champ caché
        document.querySelector('form').addEventListener('submit', function() {
            var editorContent = quill.root.innerHTML;
            document.getElementById('hidden-message').value = editorContent;
        });

        // Fonction pour faire défiler jusqu'au formulaire de réponse
        function scrollToResponseForm() {
            document.getElementById('response-form').scrollIntoView({ behavior: 'smooth' });
        }

        // Ouvrir le modal
        function openModal() {
            document.getElementById('reportModal').style.display = 'block';
        }

        // Fermer le modal
        function closeModal() {
            document.getElementById('reportModal').style.display = 'none';
        }

        // Fermer le modal en cliquant en dehors de celui-ci
        window.onclick = function(event) {
            if (event.target == document.getElementById('reportModal')) {
                document.getElementById('reportModal').style.display = 'none';
            }
        }
    </script>
</body>
</html>